<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Harga TikTok</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            background-color: #f4f4f4;
            color: #333;
        }

        /* Styles for the new compact header */
        .top-header {
            background-color: #1a1a1a;
            color: white;
            padding: 5px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .top-header h1 {
            margin: 0;
            font-size: 1.1em;
            text-align: left;
        }
        .reset-button {
            background-color: transparent;
            color: white;
            border: 1px solid white;
            border-radius: 4px;
            cursor: pointer;
            padding: 5px 10px;
            font-size: 0.8em;
            transition: background-color 0.3s;
        }
        .reset-button:hover {
            background-color: #444;
        }
        
        .results {
            position: sticky;
            top: 0;
            z-index: 1000;
            background-color: #e9ecef;
            padding: 10px 15px;
            border-bottom: 1px solid #ddd;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .results-info {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 0;
        }
        .price-display {
            font-size: 1.5em;
            font-weight: bold;
            color: #28a745;
            margin-left: 5px;
        }
        .price-display-label {
            font-size: 0.9em;
            color: #555;
            font-weight: normal;
        }
        .single-line-results {
            margin: 5px 0 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .single-line-results p {
            margin: 0;
            font-size: 0.8em;
            white-space: nowrap;
        }
        
        .container {
            padding: 10px;
            background: #fff;
        }
        
        h2 {
            text-align: center;
            color: #1a1a1a;
            font-size: 1em;
            margin: 15px 0 10px;
        }

        .section-header {
            background-color: #dc3545;
            color: white;
            padding: 5px 10px;
            text-align: center;
            font-size: 1em;
            font-weight: bold;
            margin-top: 15px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 1px; /* Dikecilkan dari 10px */
            align-items: flex-start;
        }
        .input-group label {
            font-weight: bold;
            margin-bottom: 3px;
            font-size: 0.8em;
        }
        .input-group-content {
            display: flex;
            width: 100%;
            justify-content: space-between;
            align-items: center;
        }

        /* Sizing and styling input fields */
        .input-group input[type="number"] {
            width: 40%;
            padding: 6px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            text-align: right;
        }

        /* Hiding the spinner arrows */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] {
            -moz-appearance: textfield;
        }

        .input-detail {
            font-size: 0.8em;
            color: #666;
            text-align: right;
            width: 50%;
            padding-right: 5px;
        }

        /* Cek Profit Kompetitor section */
        .custom-input-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px; /* Dikecilkan dari 10px */
        }
        .custom-input-group label {
            font-weight: bold;
            font-size: 0.8em;
            margin-right: 10px;
        }
        .custom-input-group input[type="number"] {
            width: 40%;
            padding: 6px;
            font-size: 1.2em;
            font-weight: bold;
            text-align: right;
        }

        .results-static {
            margin-top: 0;
        }

        .profit-kompetitor-display {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            font-size: 0.8em;
            margin-top: 5px;
        }
        .profit-kompetitor-display .label {
            font-weight: normal;
            margin-right: 5px;
        }
        .profit-info.negative {
            color: #dc3545;
            font-weight: bold;
        }
        .footer {
            text-align: center;
            padding: 10px;
            color: #777;
            font-size: 0.7em;
        }
    </style>
</head>
<body>

<div class="top-header">
    <h1>üî¢ Kalkulator TikTok</h1>
    <button class="reset-button" id="resetButton">‚ùåCLEAR</button>
</div>

<div class="results">
    <div class="results-info">
        <span class="price-display">Harga Jual</span>
        <span class="price-display" id="hargaJualDisplay">Rp 0</span>
    </div>
    <div class="single-line-results">
        <p>üöÄ Markup HPP <b><span id="minimalMarkup">0%</b></span></p>
        <p>üí∞ Profitnya <b><span id="targetProfitInfo">Rp 0 (0%)</span></b></p>
    </div>
</div>

<div class="container">
    <div class="content">
        <div class="input-group">
            <label for="hpp">‚ö´ Harga HPP </label>
            <div class="input-group-content">
                <span class="input-detail" id="hppDetail"></span>
                <input type="number" id="hpp" value="40000" onfocus="this.select()">Rp
            </div>
        </div>

        <div class="input-group">
            <label for="profit">üü¢ Target Profit </label>
            <div class="input-group-content">
                <span class="input-detail" id="profitDetail"></span>
                <input type="number" id="profit" value="10" onfocus="this.select()">%
            </div>
        </div>
        
        <div class="input-group">
            <label for="admin">üî¥ Biaya Admin </label>
            <div class="input-group-content">
                <span class="input-detail" id="adminDetail"></span>
                <input type="number" id="admin" value="17" onfocus="this.select()">%
            </div>
        </div>

        <div class="input-group">
            <label for="flat">üî¥ Biaya Flat</label>
            <div class="input-group-content">
                <span class="input-detail" id="flatDetail"></span>
                <input type="number" id="flat" value="1250" onfocus="this.select()">Rp
            </div>
        </div>

        <div class="input-group">
            <label for="affiliate">üî¥ Komisi Aff </label>
            <div class="input-group-content">
                <span class="input-detail" id="affiliateDetail"></span>
                <input type="number" id="affiliate" value="10" onfocus="this.select()">%
            </div>
        </div>

        <div class="input-group">
            <label for="operational">üü° Operasional</label>
            <div class="input-group-content">
                <span class="input-detail" id="operationalDetail"></span>
                <input type="number" id="operational" value="2" onfocus="this.select()">%
            </div>
        </div>
        
        <div class="input-group">
            <label for="ads">üü° Iklan</label>
            <div class="input-group-content">
                <span class="input-detail" id="adsDetail"></span>
                <input type="number" id="ads" value="10" onfocus="this.select()">%
            </div>
        </div>

        <hr>

        <div class="section-header">üîç Cek Profit Kompetitor</div>
        
        <div class="custom-input-group">
            <label for="customHarga">Harga Jual</label>
            <input type="number" id="customHarga" placeholder="Masukkan harga..." onfocus="this.select()">
        </div>
        
        <div class="results-static">
            <p class="profit-kompetitor-display profit-info">
                <span class="label">Profit:</span>
                <span id="profitKompetitorInfo">Rp 0 (0%)</span>
            </p>
        </div>
    </div>
</div>

<div class="footer">
    Created by Endro Kaukah 2025
</div>

<script>
    const hppInput = document.getElementById('hpp');
    const profitInput = document.getElementById('profit');
    const operationalInput = document.getElementById('operational');
    const adminInput = document.getElementById('admin');
    const flatInput = document.getElementById('flat');
    const affiliateInput = document.getElementById('affiliate');
    const adsInput = document.getElementById('ads');

    const hargaJualDisplay = document.getElementById('hargaJualDisplay');
    const minimalMarkupDisplay = document.getElementById('minimalMarkup');
    const targetProfitInfoDisplay = document.getElementById('targetProfitInfo');

    const customHargaInput = document.getElementById('customHarga');
    const profitKompetitorInfoDisplay = document.getElementById('profitKompetitorInfo');

    const hppDetail = document.getElementById('hppDetail');
    const profitDetail = document.getElementById('profitDetail');
    const operationalDetail = document.getElementById('operationalDetail');
    const adminDetail = document.getElementById('adminDetail');
    const flatDetail = document.getElementById('flatDetail');
    const affiliateDetail = document.getElementById('affiliateDetail');
    const adsDetail = document.getElementById('adsDetail');

    const resetButton = document.getElementById('resetButton');

    function formatRupiah(number) {
        if (isNaN(number) || number === null) {
            return '';
        }
        const formattedNumber = parseInt(Math.round(number));
        return 'Rp ' + formattedNumber.toLocaleString('id-ID');
    }

    function calculateSellingPrice() {
        const hpp = parseFloat(hppInput.value);
        const targetProfitPercentage = parseFloat(profitInput.value) / 100;
        const operationalPercentage = parseFloat(operationalInput.value) / 100;
        const adminPercentage = parseFloat(adminInput.value) / 100;
        const flat = parseFloat(flatInput.value);
        const affiliatePercentage = parseFloat(affiliateInput.value) / 100;
        const adsPercentage = parseFloat(adsInput.value) / 100;

        const totalCostPercentage = operationalPercentage + adminPercentage + affiliatePercentage + adsPercentage + targetProfitPercentage;
        
        if (isNaN(hpp) || isNaN(flat) || isNaN(totalCostPercentage)) {
            const warningText = '‚ö†Ô∏è Belum Lengkap';
            hargaJualDisplay.textContent = warningText;
            minimalMarkupDisplay.textContent = '0%';
            targetProfitInfoDisplay.textContent = 'Rp 0 (0%)';
            
            hppDetail.textContent = '';
            flatDetail.textContent = '';
            profitDetail.textContent = '';
            operationalDetail.textContent = '';
            adminDetail.textContent = '';
            affiliateDetail.textContent = '';
            adsDetail.textContent = '';
            
            checkCustomPrice();
            return;
        }

        const denominator = 1 - totalCostPercentage;
        if (denominator <= 0) {
            const warningText = '‚ö†Ô∏è Total biaya >= 100%';
            hargaJualDisplay.textContent = warningText;
            minimalMarkupDisplay.textContent = '0%';
            targetProfitInfoDisplay.textContent = 'Rp 0 (0%)';
            return;
        }

        const hargaJual = (hpp + flat) / denominator;
        const pembulatan = Math.ceil(hargaJual / 100) * 100; // Pembulatan ke kelipatan 100
        const minimalMarkup = ((pembulatan / hpp) - 1) * 100;
        const calculatedTargetProfitRp = pembulatan * targetProfitPercentage;

        hargaJualDisplay.textContent = formatRupiah(pembulatan);
        minimalMarkupDisplay.textContent = `${Math.round(minimalMarkup)}%`;
        targetProfitInfoDisplay.textContent = `${formatRupiah(calculatedTargetProfitRp)} (${Math.round(targetProfitPercentage * 100)}%)`;

        hppDetail.textContent = formatRupiah(hpp);
        flatDetail.textContent = formatRupiah(flat);
        profitDetail.textContent = formatRupiah(pembulatan * targetProfitPercentage);
        operationalDetail.textContent = formatRupiah(pembulatan * operationalPercentage);
        adminDetail.textContent = formatRupiah(pembulatan * adminPercentage);
        affiliateDetail.textContent = formatRupiah(pembulatan * affiliatePercentage);
        adsDetail.textContent = formatRupiah(pembulatan * adsPercentage);

        if (document.activeElement !== customHargaInput) {
            customHargaInput.value = pembulatan;
        }

        checkCustomPrice();
    }

    function checkCustomPrice() {
        const hpp = parseFloat(hppInput.value);
        const customHarga = parseFloat(customHargaInput.value);
        const operationalPercentage = parseFloat(operationalInput.value) / 100;
        const adminPercentage = parseFloat(adminInput.value) / 100;
        const flat = parseFloat(flatInput.value);
        const affiliatePercentage = parseFloat(affiliateInput.value) / 100;
        const adsPercentage = parseFloat(adsInput.value) / 100;

        if (isNaN(customHarga) || isNaN(hpp) || isNaN(operationalPercentage) || isNaN(adminPercentage) || isNaN(flat) || isNaN(affiliatePercentage) || isNaN(adsPercentage)) {
            profitKompetitorInfoDisplay.textContent = '‚ö†Ô∏è Belum Lengkap';
            return;
        }

        const operationalCost = customHarga * operationalPercentage;
        const adminCost = customHarga * adminPercentage;
        const affiliateCost = customHarga * affiliatePercentage;
        const adsCost = customHarga * adsPercentage;

        const profitRp = customHarga - hpp - operationalCost - adminCost - flat - affiliateCost - adsCost;
        const profitPersen = (profitRp / customHarga) * 100;

        profitKompetitorInfoDisplay.textContent = `${formatRupiah(profitRp)} (${Math.round(profitPersen)}%)`;

        const profitKompetitorContainer = profitKompetitorInfoDisplay.parentElement;
        if (profitRp < 0) {
            profitKompetitorContainer.classList.add('negative');
        } else {
            profitKompetitorContainer.classList.remove('negative');
        }
    }

    function resetCalculator() {
        hppInput.value = 0;
        profitInput.value = 0;
        operationalInput.value = 0;
        adminInput.value = 0;
        flatInput.value = 0;
        affiliateInput.value = 0;
        adsInput.value = 0;
        customHargaInput.value = '';
        calculateSellingPrice();
    }

    const inputs = document.querySelectorAll('input[type="number"]');
    inputs.forEach(input => {
        input.addEventListener('input', () => {
            calculateSellingPrice();
            checkCustomPrice();
        });
    });

    resetButton.addEventListener('click', resetCalculator);

    document.addEventListener('DOMContentLoaded', () => {
        calculateSellingPrice();
    });
</script>

</body>
</html>
